(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[657],{8198:function(e,t,r){Promise.resolve().then(r.bind(r,3724))},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(4090),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=(e,t)=>{let r=(0,s.forwardRef)((r,d)=>{let{color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:o,children:u,...m}=r;return(0,s.createElement)("svg",{ref:d,...a,width:l,height:l,stroke:i,strokeWidth:o?24*Number(c)/Number(l):c,className:"lucide lucide-".concat(n(e)),...m},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},3879:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},94:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},699:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8670:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2235:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(5250),a=r.n(s)},3724:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(3827),a=r(4090),n=r(3879),d=r(8670),i=r(94),l=r(2235),c=r(699),o=r(8792);function u(){let e=[{id:"purchase",label:"Purchase",forTypes:["add"]},{id:"return_from_customer",label:"Return from Customer",forTypes:["add"]},{id:"production",label:"Production",forTypes:["add"]},{id:"found",label:"Inventory Found",forTypes:["add"]},{id:"sale",label:"Sale",forTypes:["remove"]},{id:"damaged",label:"Damaged/Expired",forTypes:["remove"]},{id:"theft",label:"Theft/Loss",forTypes:["remove"]},{id:"transfer",label:"Transfer",forTypes:["add","remove"]},{id:"correction",label:"Count Correction",forTypes:["add","remove","set"]},{id:"initial",label:"Initial Count",forTypes:["set"]}],t=[{id:1,name:"Water Bottle - 500ml",sku:"WTR-B500",category:"Water",currentStock:250,minStock:50,maxStock:300,location:"WH-A12"},{id:2,name:"Water Bottle - 1L",sku:"WTR-B1000",category:"Water",currentStock:180,minStock:40,maxStock:250,location:"WH-A14"},{id:3,name:"Water Gallon - 5L",sku:"WTR-G5000",category:"Water",currentStock:30,minStock:25,maxStock:100,location:"WH-B05"},{id:4,name:"Ice Bag - 2kg",sku:"ICE-B2000",category:"Ice",currentStock:120,minStock:30,maxStock:150,location:"WH-C01"},{id:5,name:"Ice Bag - 5kg",sku:"ICE-B5000",category:"Ice",currentStock:85,minStock:20,maxStock:100,location:"WH-C02"}],[r,u]=(0,a.useState)({adjustmentType:"add",reasonCode:"purchase",reference:"",notes:"",date:new Date().toISOString().split("T")[0],items:[]}),[m,x]=(0,a.useState)(""),[p,h]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),f=e=>{if(x(e),""===e.trim()){h([]),b(!1);return}h(t.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.sku.toLowerCase().includes(e.toLowerCase()))),b(!0)},g=e=>{r.items.some(t=>t.id===e.id)||(u(t=>({...t,items:[...t.items,{id:e.id,quantity:0,newQuantity:e.currentStock}]})),x(""),b(!1))},j=e=>{u(t=>({...t,items:t.items.filter(t=>t.id!==e)}))},v=(e,r)=>{let s=parseInt(r)||0;u(r=>{let a=r.items.map(a=>{if(a.id===e){let n=t.find(t=>t.id===e);if(!n)return a;let d=n.currentStock;switch(r.adjustmentType){case"add":d=n.currentStock+s;break;case"remove":d=Math.max(0,n.currentStock-s);break;case"set":d=s}return{...a,quantity:s,newQuantity:d}}return a});return{...r,items:a}})},k=s=>{var a;let n=r.reasonCode,d=e.find(e=>e.id===n&&e.forTypes.includes(s))?n:(null===(a=e.find(e=>e.forTypes.includes(s)))||void 0===a?void 0:a.id)||"";u(e=>({...e,adjustmentType:s,reasonCode:d,items:e.items.map(e=>{let r=t.find(t=>t.id===e.id);if(!r)return e;let a=r.currentStock;switch(s){case"add":a=r.currentStock+e.quantity;break;case"remove":a=Math.max(0,r.currentStock-e.quantity);break;case"set":a=e.quantity}return{...e,newQuantity:a}})}))},N=e=>t.find(t=>t.id===e);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)(o.default,{href:"/inventory",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[(0,s.jsx)(n.Z,{size:16,className:"mr-1"}),"Back to Inventory"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Adjust Inventory"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Add, remove, or update product stock levels"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),0===r.items.length){alert("Please add at least one item to adjust.");return}if(!r.reasonCode){alert("Please select a reason for the adjustment.");return}console.log("Submitting stock adjustment:",r),alert("Stock adjustment has been successfully recorded!")},children:[(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Adjustment Type"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"add",label:"Add Stock",description:"Increase inventory levels"},{id:"remove",label:"Remove Stock",description:"Decrease inventory levels"},{id:"set",label:"Set Exact Value",description:"Set a specific inventory level"}].map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition ".concat(r.adjustmentType===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>k(e.id),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full mr-2 ".concat(r.adjustmentType===e.id?"bg-blue-500":"bg-gray-300")}),(0,s.jsx)("h3",{className:"font-medium",children:e.label})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),(0,s.jsxs)("select",{value:r.reasonCode,onChange:e=>u({...r,reasonCode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a reason"}),e.filter(e=>e.forTypes.includes(r.adjustmentType)).map(e=>(0,s.jsx)("option",{value:e.id,children:e.label},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference (Optional)"}),(0,s.jsx)("input",{type:"text",value:r.reference,onChange:e=>u({...r,reference:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g. Purchase Order #, Invoice #"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,s.jsx)("input",{type:"date",value:r.date,onChange:e=>u({...r,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),(0,s.jsx)("input",{type:"text",value:r.notes,onChange:e=>u({...r,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Additional information about this adjustment"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Products"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md w-full",placeholder:"Search products by name or SKU"}),y&&p.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:p.map(e=>(0,s.jsxs)("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex justify-between items-center",onClick:()=>g(e),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.sku})]}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:["Stock: ",e.currentStock]}),(0,s.jsx)("button",{type:"button",className:"ml-2 text-blue-600 hover:text-blue-800",onClick:t=>{t.stopPropagation(),g(e)},children:(0,s.jsx)(i.Z,{size:16})})]})]},e.id))}),y&&0===p.length&&m&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg p-4 text-center",children:(0,s.jsxs)("p",{className:"text-gray-500",children:['No products found matching "',m,'"']})})]})]}),r.items.length>0&&(0,s.jsx)("div",{className:"border rounded-md overflow-hidden mb-6",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"set"===r.adjustmentType?"New Value":"Quantity"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New Stock Level"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.items.map(e=>{let t=N(e.id);return t?(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:t.sku})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.currentStock}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("input",{type:"number",min:"0",value:e.quantity||"",onChange:t=>v(e.id,t.target.value),className:"w-24 px-3 py-1 border border-gray-300 rounded-md",required:!0})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("span",{className:"text-sm font-medium ".concat(e.newQuantity>t.currentStock?"text-green-600":e.newQuantity<t.currentStock?"text-red-600":"text-gray-600"),children:e.newQuantity}),"set"!==r.adjustmentType&&(0,s.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.newQuantity>t.currentStock?"+":"",e.newQuantity-t.currentStock,")"]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsx)("button",{type:"button",onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800",children:"Remove"})})]},e.id):null})})]})}),0===r.items.length&&(0,s.jsx)("div",{className:"border border-dashed border-gray-300 rounded-md p-6 text-center mb-6",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Search and add products to adjust their stock levels"})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t border-gray-200",children:[(0,s.jsxs)(o.default,{href:"/inventory",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 inline-flex items-center",children:[(0,s.jsx)(l.Z,{size:16,className:"mr-2"}),"Cancel"]}),(0,s.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 inline-flex items-center",children:[(0,s.jsx)(c.Z,{size:16,className:"mr-2"}),"Record Adjustment"]})]})]})})]})}}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=8198)}),_N_E=e.O()}]);